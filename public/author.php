<?php require_once __DIR__.'/_bootstrap.php'; $id=(int)($_GET['author_id']??0); $st=db()->prepare('SELECT * FROM authors WHERE author_id=:id LIMIT 1');$st->execute([':id'=>$id]);$g=$st->fetch(); if(!$g){http_response_code(404);exit('not found');} $items=db()->prepare('SELECT i.* FROM items i JOIN item_authors iau ON iau.item_id=i.id WHERE iau.author_id=:gid ORDER BY i.item_date DESC LIMIT 80');$items->execute([':gid'=>$g['id']]);$items=$items->fetchAll(); include __DIR__.'/partials/header.php'; ?>
<div class="card"><h1><?= e($g['name']) ?></h1></div><div class="grid"><?php foreach($items as $it): ?><div class="card item-card"><img src="<?= e($it['image_small']) ?>"><a href="/public/item.php?content_id=<?= urlencode($it['content_id']) ?>"><?= e($it['title']) ?></a></div><?php endforeach; ?></div><?php include __DIR__.'/partials/footer.php'; ?>
