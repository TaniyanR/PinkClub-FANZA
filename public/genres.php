<?php require_once __DIR__.'/_bootstrap.php'; $rows=db()->query('SELECT g.*,COUNT(ig.item_id) item_count FROM genres g LEFT JOIN item_genres ig ON ig.genre_id=g.id GROUP BY g.id ORDER BY g.name')->fetchAll(); include __DIR__.'/partials/header.php'; ?>
<div class="card"><h1>ジャンル一覧</h1></div><div class="grid"><?php foreach($rows as $r): ?><div class="card"><a href="/public/genre.php?genre_id=<?= e((string)$r['genre_id']) ?>"><?= e($r['name']) ?></a> (<?= e((string)$r['item_count']) ?>)</div><?php endforeach; ?></div><?php include __DIR__.'/partials/footer.php'; ?>
