<?php declare(strict_types=1); require_once __DIR__ . '/_bootstrap.php'; require_once __DIR__ . '/../../lib/db.php'; function e(string $v): string { return htmlspecialchars($v, ENT_QUOTES | ENT_SUBSTITUTE | ENT_HTML5, 'UTF-8'); } $rows=db()->query('SELECT * FROM mail_logs ORDER BY id DESC LIMIT 200')->fetchAll(PDO::FETCH_ASSOC); $pageTitle='メール'; ob_start();?><h1>お問い合わせログ</h1><div class="admin-card"><table><tr><th>日時</th><th>from</th><th>subject</th><th>ok</th><th>error</th></tr><?php foreach($rows as $r): ?><tr><td><?php echo e((string)$r['created_at']); ?></td><td><?php echo e((string)$r['from_email']); ?></td><td><?php echo e((string)$r['subject']); ?></td><td><?php echo e((string)$r['sent_ok']); ?></td><td><?php echo e((string)$r['error_message']); ?></td></tr><?php endforeach; ?></table></div><?php $content=(string)ob_get_clean(); include __DIR__.'/../partials/admin_layout.php';
