<?php declare(strict_types=1); require_once __DIR__ . '/_bootstrap.php'; require_once __DIR__ . '/../../lib/app_features.php'; function e(string $v): string { return htmlspecialchars($v, ENT_QUOTES | ENT_SUBSTITUTE | ENT_HTML5, 'UTF-8'); } $msg=''; if(($_SERVER['REQUEST_METHOD']??'GET')==='POST' && csrf_verify((string)($_POST['_token']??''))){app_setting_set_many(['head_injection_code'=>(string)$_POST['head_injection_code'],'body_end_injection_code'=>(string)$_POST['body_end_injection_code'],'sidebar_ad_html'=>(string)$_POST['sidebar_ad_html'],'item_inline_ad_html'=>(string)$_POST['item_inline_ad_html']]);$msg='保存しました';}
$pageTitle='広告/コード挿入'; ob_start();?><h1>広告/コード挿入</h1><?php if($msg!==''): ?><div class="admin-card"><?php echo e($msg); ?></div><?php endif; ?><form class="admin-card" method="post"><input type="hidden" name="_token" value="<?php echo e(csrf_token()); ?>"><label>head挿入コード</label><textarea name="head_injection_code" rows="6"><?php echo e((string)app_setting_get('head_injection_code','')); ?></textarea><label>body終端挿入コード</label><textarea name="body_end_injection_code" rows="6"><?php echo e((string)app_setting_get('body_end_injection_code','')); ?></textarea><label>サイドバー広告HTML</label><textarea name="sidebar_ad_html" rows="6"><?php echo e((string)app_setting_get('sidebar_ad_html','')); ?></textarea><label>記事詳細内広告HTML</label><textarea name="item_inline_ad_html" rows="6"><?php echo e((string)app_setting_get('item_inline_ad_html','')); ?></textarea><button>保存</button></form><?php $content=(string)ob_get_clean(); include __DIR__.'/../partials/admin_layout.php';
